version: '2'

services:
 app:
  image: m3adow/seafile
  restart: always
  ports:
  - 8000:8000
  - 8082:8082
  environment:
      - SEAFILE_NAME=seafilebox
      - SEAFILE_ADDRESS=127.0.0.1
      - SEAFILE_ADMIN=admin
      - SEAFILE_ADMIN_PW=admin

  volumes:
    - ./store:/seafile

 haproxy:
    image: jclebreton/https-proxy
    container_name: haproxy
    restart: always
    ports:
      - 443:443
    links:
      - app
    depends_on:
      - app
    environment:
      - BACKEND_SERVER=app
      - BACKEND_PORT=8000
